<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>   

    <script src="instascan.min.js"></script>

    <style>
        .qr-code-border {
          border: 2px solid red; /* Change the border style as desired */
          width: 50px; /* Adjust the border width as desired */
          height: 50px; /* Adjust the border height as desired */
        }
    </style>
</head>

<body>
    <video id="video"></video>
    <div id="qr-code-overlay"></div>

    <script>
        const videoElement = document.getElementById("video");
        const qrCodeOverlay = document.getElementById("qr-code-overlay");
        let scanner;
        
        // Function to start the back camera and QR code detection
        async function startBackCamera() {
          try {
              const args = { video: videoElement };
            window.URL.createObjectURL = (stream) => {
                        args.video.srcObject = stream;
                        return stream;
            };
            scanner = new Instascan.Scanner(args);
            scanner.addListener("scan", onQRCodeDetected);
            await Instascan.Camera.getCameras().then(cameras => {
              if (cameras.length > 0) {
                const backCamera = cameras.find(camera => camera.name.includes("back"));
                if (backCamera) {
                  scanner.start(backCamera);
                } else {
                  scanner.start(cameras[0]);
                }
              } else {
                console.error("No cameras found.");
              }
            });
          } catch (error) {
            console.error("Error accessing the back camera:", error);
          }
        }
        
        // Function to handle detected QR codes and draw borders
        function onQRCodeDetected(content) {
          console.log("QR code detected:", content);
        
          // Draw a border around the detected QR code
          const border = document.createElement("div");
          border.className = "qr-code-border";
          border.style.position = "absolute";
          border.style.left = "50%"; // Center the border
          border.style.transform = "translateX(-50%)";
          border.style.top = "50%"; // Center the border
          border.style.transform = "translateY(-50%)";
          qrCodeOverlay.appendChild(border);
        
          // You can also add more custom handling for the detected QR code here
        }
        
        // Start the back camera when the page loads
        window.onload = startBackCamera;
    </script>
</body>

</html>
